appId: com.electron.deepfocus
productName: Deep Focus
copyright: Copyright Â© 2024 Timeo Williams
directories:
  output: dist
  buildResources: build
files:
  - 'out/**/*'
  - 'package.json'
extraResources:
  - from: '.env'
    to: '.env'
  - from: './resources/icon_blue.png'
    to: 'resources/icon_blue.png'
  - from: './resources/icon_green.png'
    to: 'resources/icon_green.png'
  - from: './resources/icon_red.png'
    to: 'resources/icon_red.png'
  - from: './resources/icon_yellow.png'
    to: 'resources/icon_yellow.png'
  - from: './resources/icon.png'
    to: 'resources/icon.png'

forceCodeSigning: true
compression: 'store' # Change to 'maxium' to enable compression in PROD. tore can reduce build time significantly. 

asar: true
# This section handles which files are not to be packed into the asar archive and need signing
asarUnpack:
  - "node_modules/node-mac-permissions/build/Release/permissions.node"
  - "node_modules/@deepfocus/get-windows/main"
  - "node_modules/node-mac-permissions/build/node_gyp_bins/python3"
  - "Frameworks/Electron Framework.framework/Libraries/*.dylib"

mac:
  entitlements: build/entitlements.mac.plist
  entitlementsInherit: build/entitlements.mac.plist
  darkModeSupport: true
  hardenedRuntime: true
  notarize: false
  target: 
    - dmg
  extendInfo:
    NSCameraUsageDescription: Application requests access to the device's camera.
    NSMicrophoneUsageDescription: Application requests access to the device's microphone.
    NSDocumentsFolderUsageDescription: Application requests access to the user's Documents folder.
    NSDownloadsFolderUsageDescription: Application requests access to the user's Downloads folder.
    NSAppleEventsUsageDescription: Please allow access to script browser applications to detect the current URL when triggering instant lookup.
    NSCalendarsUsageDescription: Application needs access to calendars for productivity scheduling.
    NSScreenCaptureUsageDescription: Application needs access to capture the screen for productivity monitoring.
    NSAccessibilityUsageDescription: Application requires access to accessibility features to track and monitor window titles.
  category: 'public.app-category.productivity'
  

# win:
#   # Removed invalid properties like shortcutName, uninstallDisplayName, and createDesktopShortcut
#   target:
#     - nsis
#   artifactName: '${name}-${version}-setup.${ext}'
#   icon: './resources/icon.ico'

# nsis:
#   oneClick: false
#   perMachine: true
#   allowElevation: true
#   allowToChangeInstallationDirectory: true
#   installerIcon: './resources/icon.ico'
#   uninstallerIcon: './resources/icon.ico'
#   deleteAppDataOnUninstall: true
#   createDesktopShortcut: true  # This should be set in the `nsis` section
#   createStartMenuShortcut: true

# linux:
#   target:
#     - AppImage
#     - snap
#     - deb
#   maintainer: electronjs.org
#   category: Utility

appImage:
  artifactName: '${name}-${version}.${ext}'

npmRebuild: false

afterSign: scripts/notarize.js

publish:
  provider: generic
  url: https://example.com/auto-updates
